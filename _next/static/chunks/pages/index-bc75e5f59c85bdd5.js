(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7314:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6866)}])},6866:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return M}});var s,i=n(2322),a=n(7729),o=n.n(a),c=n(2784);let r=(0,c.createContext)({wallets:[]}),l=()=>(0,c.useContext)(r),d=({children:t,walletAggregator:e})=>{let[n,s]=(0,c.useState)([]);(0,c.useEffect)(()=>{s(e.getWallets())},[e]);let a=(0,c.useMemo)(()=>({wallets:n}),[n]);return(0,i.jsx)(r.Provider,Object.assign({value:a},{children:t}))};class u{constructor(t){this.walletProviders=t}getWallets(){let t=[];for(let e of this.walletProviders)t.push(...e.getWallets());return t}}(E=s||(s={})).INJECTED="INJECTED",E.WALLET_CONNECT="WALLET_CONNECT",E.LEDGER="LEDGER";var h=function(t,e,n,s){return new(n||(n=Promise))(function(i,a){function o(t){try{r(s.next(t))}catch(e){a(e)}}function c(t){try{r(s.throw(t))}catch(e){a(e)}}function r(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,c)}r((s=s.apply(t,e||[])).next())})};let m=t=>t;class ${constructor(t,e){this.type=s.INJECTED,this.extension=t,this.metadata=Object.assign({},t.metadata),this.appName=e}getAccounts(){var t;return h(this,void 0,void 0,function*(){let e=yield null===(t=this.injected)||void 0===t?void 0:t.accounts.get();return(null==e?void 0:e.map(t=>m(t)))||[]})}connect(){var t;return h(this,void 0,void 0,function*(){this.injected=yield null===(t=this.extension)||void 0===t?void 0:t.enable(this.appName),this.signer=this.injected.signer})}disconnect(){return h(this,void 0,void 0,function*(){})}isConnected(){return!1}}class f{constructor(t,e,n=!1){this.config=t,this.supportedOnly=n,this.appName=e}getExtensions(){let t=window,e=[],n=[];return t.injectedWeb3?Object.keys(t.injectedWeb3).forEach(s=>{var i,a;if(!(null===(i=this.config.disallowed)||void 0===i?void 0:i.includes(s))){let o=null===(a=this.config.supported)||void 0===a?void 0:a.find(({id:t})=>t===s);o?e.push(Object.assign(Object.assign({},t.injectedWeb3[s]),{metadata:o})):n.push(Object.assign(Object.assign({},t.injectedWeb3[s]),{metadata:{id:s,title:s}}))}}):console.log("no extension was detected!"),{known:e,other:n}}getWallets(){let t=[],{known:e,other:n}=this.getExtensions(),s=[...e];return this.supportedOnly||(s=[...s,...n]),s.map(t=>new $(t,this.appName))}}var p=n(2309),v=n(8980),g=n.n(v),w=n(2131),x=function(t,e,n,s){return new(n||(n=Promise))(function(i,a){function o(t){try{r(s.next(t))}catch(e){a(e)}}function c(t){try{r(s.throw(t))}catch(e){a(e)}}function r(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,c)}r((s=s.apply(t,e||[])).next())})};class j{constructor(t,e,n){this.id=0,this.signPayload=t=>x(this,void 0,void 0,function*(){let{signature:e}=yield this.client.request({topic:this.session.topic,chainId:this.chainId,request:{id:1,jsonrpc:"2.0",method:"polkadot_signTransaction",params:{address:t.address,transactionPayload:t}}});return{id:++this.id,signature:e}}),this.signRaw=t=>x(this,void 0,void 0,function*(){let{signature:e}=yield this.client.request({topic:this.session.topic,chainId:"polkadot:91b171bb158e2d3848fa23a9f1c25182",request:{id:1,jsonrpc:"2.0",method:"polkadot_signMessage",params:{address:t.address,message:t.data}}});return{id:++this.id,signature:e}}),this.client=t,this.session=e,this.registry=new w.P,this.chainId=n}}var b=function(t,e,n,s){return new(n||(n=Promise))(function(i,a){function o(t){try{r(s.next(t))}catch(e){a(e)}}function c(t){try{r(s.throw(t))}catch(e){a(e)}}function r(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,c)}r((s=s.apply(t,e||[])).next())})};let _="polkadot:91b171bb158e2d3848fa23a9f1c25182",y=t=>{let e=t.split(":")[2];return{address:e}};class N{constructor(t,e){var n,i,a;this.type=s.WALLET_CONNECT,this.config=t,this.appName=e,this.metadata={title:"Wallet Connect",description:(null===(n=t.metadata)||void 0===n?void 0:n.description)||"",urls:{main:(null===(i=t.metadata)||void 0===i?void 0:i.url)||""},iconUrl:(null===(a=t.metadata)||void 0===a?void 0:a.icons[0])||"",version:"2.0"}}reset(){this.client=void 0,this.session=void 0,this.signer=void 0}getAccounts(){return b(this,void 0,void 0,function*(){let t=[];return this.session&&(t=Object.values(this.session.namespaces).map(t=>t.accounts).flat().map(t=>y(t))),t})}connect(){return b(this,void 0,void 0,function*(){try{this.reset();let t=yield p.ZP.init(this.config),{uri:e,approval:n}=yield t.connect({requiredNamespaces:{polkadot:{methods:["polkadot_signTransaction","polkadot_signMessage"],chains:[_],events:[]}}});e&&g().open(e,()=>{console.log("EVENT","QR Code Modal closed")});let s=yield n();this.client=t,this.session=s,this.signer=new j(t,s,_),console.log(this.session)}catch(i){console.error(i)}finally{g().close()}})}disconnect(){var t,e,n;return b(this,void 0,void 0,function*(){(null===(t=this.session)||void 0===t?void 0:t.topic)&&(null===(e=this.client)||void 0===e||e.disconnect({topic:null===(n=this.session)||void 0===n?void 0:n.topic,reason:{code:-1,message:"Disconnected by client!"}})),this.reset()})}isConnected(){return!!(this.client&&this.signer&&this.session)}}class k{constructor(t,e){this.config=t,this.appName=e}getWallets(){return[new N(this.config,this.appName)]}}var E,C={disallowed:[],supported:[{id:"polkadot-js",title:"polkadotJS",description:"Basic account injection and signer",urls:{main:"",browsers:{chrome:"https://chrome.google.com/webstore/detail/polkadot%7Bjs%7D-extension/mopnmbcafieddcagagdcbnhejhlodfdd",firefox:"https://addons.mozilla.org/en-US/firefox/addon/polkadot-js-extension/"}}},{id:"talisman",title:"talisman",description:"Talisman is a Polkadot wallet that unlocks a new world of multichain web3 applications in the Paraverse",urls:{main:"",browsers:{chrome:"https://chrome.google.com/webstore/detail/talisman-wallet/fijngjgcjhjmmpcmkeiomlglpeiijkld",firefox:"https://addons.mozilla.org/en-US/firefox/addon/talisman-wallet-extension/"}}},]},D=n(6724),T=n.n(D),H=n(8788),W=n(5163),S=n(5196),P=n(7515),L=function(t){var e=t;if(t&&t.length>20){var n=t.slice(0,10),s=t.slice(-10);e="".concat(n,"...").concat(s)}return e},A=function(t){var e,n,s=t.api,a=t.account,o=t.signer,c=(e=(0,H.Z)(function(t){var e,n;return(0,W.__generator)(this,function(i){switch(i.label){case 0:if(t.preventDefault(),t.stopPropagation(),!(s&&(null==a?void 0:a.address)&&o))return[3,2];return e=s.registry.chainDecimals[0],n={},[4,s.tx.system.remark("I am signing this transaction!").signAndSend(a.address,(n.signer=o,n),function(){})];case 1:i.sent(),i.label=2;case 2:return[2]}})}),function(t){return e.apply(this,arguments)}),r=(n=(0,H.Z)(function(t){var e,n,s;return(0,W.__generator)(this,function(i){switch(i.label){case 0:if(t.preventDefault(),t.stopPropagation(),!((e=null==o?void 0:o.signRaw)&&(null==a?void 0:a.address)))return[3,2];return[4,e(((s={}).address=a.address,s.data="I am signing this message",s.type="bytes",s))];case 1:n=i.sent().signature,i.label=2;case 2:return[2]}})}),function(t){return n.apply(this,arguments)});return(0,i.jsxs)("div",{className:"".concat(T().card," ").concat(T().account),children:[(0,i.jsx)("div",{className:"".concat(T().name),children:L(null==a?void 0:a.name)}),(0,i.jsx)("div",{className:"".concat(T().address),children:L(null==a?void 0:a.address)}),(0,i.jsxs)("div",{className:"".concat(T().flex," ").concat(T().column),children:[(0,i.jsx)("button",{className:"".concat(T().btn," ").concat(T().small),onClick:function(t){return c(t)},children:"Submit Transaction"}),(0,i.jsx)("button",{className:"".concat(T().btn," ").concat(T().small),onClick:function(t){return r(t)},children:"Sign Message"})]})]})},I=function(t){var e,n=t.wallet,s=(0,c.useState)([]),a=s[0],o=s[1],r=(0,c.useState)(null),l=r[0],d=r[1],u=(0,c.useState)(!1),h=u[0],m=u[1];(0,c.useEffect)(function(){var t;(t=(0,H.Z)(function(){var t,e,n;return(0,W.__generator)(this,function(s){switch(s.label){case 0:return t=new S.U("wss://westend-rpc.polkadot.io"),n={},[4,P.G.create((n.provider=t,n))];case 1:return d(e=s.sent()),[2]}})}),function(){return t.apply(this,arguments)})()},[]);var $=(e=(0,H.Z)(function(t){var e,s;return(0,W.__generator)(this,function(t){switch(t.label){case 0:if(console.log("wallet clicked!"),h)return[3,6];t.label=1;case 1:return t.trys.push([1,4,5,6]),m(!0),[4,n.connect()];case 2:return t.sent(),[4,n.getAccounts()];case 3:return o(e=t.sent()),[3,6];case 4:return s=t.sent(),[3,6];case 5:return m(!1),[7];case 6:return[2]}})}),function(t){return e.apply(this,arguments)});return(0,i.jsxs)("div",{className:"".concat(T().card," ").concat(T().shadow),style:{marginBottom:"20px"},onClick:$,children:[(0,i.jsx)("div",{className:"".concat(T().walletheader),children:"".concat(n.metadata.title," ").concat(n.metadata.version||"")}),(0,i.jsx)("div",{className:"".concat(T().wallet),children:a.length>0&&a.map(function(t){var e=t.address,s=t.name;return(0,i.jsx)("div",{children:(0,i.jsx)(A,{api:l,account:{address:e,name:void 0===s?"":s},signer:n.signer})},e)})})]})},O=(0,c.memo)(I),U=function(){var t=l().wallets;return(0,i.jsx)("div",{children:t.map(function(t){return(0,i.jsx)(O,{wallet:t},t.metadata.title)})})},G=(0,c.memo)(U),J="Dotsama Demo",q=function(){var t=new f(C,J),e=new k({projectId:"4fae85e642724ee66587fa9f37b997e2",relayUrl:"wss://relay.walletconnect.com",metadata:{name:"Dotsama Demo",description:"Dotsama Demo",url:"#",icons:["https://walletconnect.com/walletconnect-logo.png"]}},J),n=new u([t,e]),s=(0,c.useState)(!1),a=s[0],o=s[1];return(0,i.jsx)(d,{walletAggregator:n,children:(0,i.jsxs)("div",{className:"".concat(T().grid),children:[!a&&(0,i.jsx)("button",{className:"".concat(T().btn," ").concat(T().rounded),onClick:function(){o(!0)},children:"Get Wallets"}),a&&(0,i.jsx)(G,{})]})})},M=function(){return(0,i.jsxs)("div",{className:T().container,children:[(0,i.jsxs)(o(),{children:[(0,i.jsx)("title",{children:"Substrate Wallet Aggregator"}),(0,i.jsx)("meta",{name:"description",content:"A wallet aggregator to select accounts from your different wallets"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)("main",{className:T().main,children:[(0,i.jsx)("h1",{className:T().title,children:"Substrate Wallets"}),(0,i.jsx)("p",{className:T().description,children:"Get started by connecting to your favorite wallets"}),(0,i.jsx)(q,{})]})]})}},6724:function(t){t.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",grid:"Home_grid__GxQ85",title:"Home_title__T09hD",description:"Home_description__41Owk",card:"Home_card___LpL1",shadow:"Home_shadow__UcJVL",wallet:"Home_wallet__iOS9t",walletheader:"Home_walletheader__JFQMn",account:"Home_account__SbDoP",name:"Home_name__Je8n6",address:"Home_address__UT_ly",logo:"Home_logo__27_tb",btn:"Home_btn__UGRT9",small:"Home_small__xqsik",flex:"Home_flex__XpVr_",column:"Home_column__Bx5cY",rounded:"Home_rounded__7bEnD"}},9314:function(){},5477:function(){},2649:function(){},3196:function(){}},function(t){t.O(0,[827,662,774,888,179],function(){return t(t.s=7314)}),_N_E=t.O()}]);