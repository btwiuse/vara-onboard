(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7314:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9361)}])},9361:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Z}});var i,s=n(2322),a=n(7729),o=n.n(a),c=n(2784);let r=(0,c.createContext)({wallets:[]}),l=()=>(0,c.useContext)(r),d=({children:t,walletAggregator:e})=>{let[n,i]=(0,c.useState)([]);(0,c.useEffect)(()=>{i(e.getWallets())},[e]);let a=(0,c.useMemo)(()=>({wallets:n}),[n]);return(0,s.jsx)(r.Provider,Object.assign({value:a},{children:t}))};class u{constructor(t){this.walletProviders=t}getWallets(){let t=[];for(let e of this.walletProviders)t.push(...e.getWallets());return t}}(E=i||(i={})).INJECTED="INJECTED",E.WALLET_CONNECT="WALLET_CONNECT",E.LEDGER="LEDGER";var h=function(t,e,n,i){return new(n||(n=Promise))(function(s,a){function o(t){try{r(i.next(t))}catch(e){a(e)}}function c(t){try{r(i.throw(t))}catch(e){a(e)}}function r(t){var e;t.done?s(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,c)}r((i=i.apply(t,e||[])).next())})};let m=t=>t;class ${constructor(t,e){this.type=i.INJECTED,this.extension=t,this.metadata=Object.assign({},t.metadata),this.appName=e}getAccounts(){var t;return h(this,void 0,void 0,function*(){let e=yield null===(t=this.injected)||void 0===t?void 0:t.accounts.get();return(null==e?void 0:e.map(t=>m(t)))||[]})}connect(){var t;return h(this,void 0,void 0,function*(){this.injected=yield null===(t=this.extension)||void 0===t?void 0:t.enable(this.appName),this.signer=this.injected.signer})}disconnect(){return h(this,void 0,void 0,function*(){})}isConnected(){return!1}}class f{constructor(t,e,n=!1){this.config=t,this.supportedOnly=n,this.appName=e}getExtensions(){let t=window,e=[],n=[];return t.injectedWeb3?Object.keys(t.injectedWeb3).forEach(i=>{var s,a;if(!(null===(s=this.config.disallowed)||void 0===s?void 0:s.includes(i))){let o=null===(a=this.config.supported)||void 0===a?void 0:a.find(({id:t})=>t===i);o?e.push(Object.assign(Object.assign({},t.injectedWeb3[i]),{metadata:o})):n.push(Object.assign(Object.assign({},t.injectedWeb3[i]),{metadata:{id:i,title:i}}))}}):console.log("no extension was detected!"),{known:e,other:n}}getWallets(){let t=[],{known:e,other:n}=this.getExtensions(),i=[...e];return this.supportedOnly||(i=[...i,...n]),i.map(t=>new $(t,this.appName))}}var p=n(2319),v=n(8980),g=n.n(v),w=n(3588),x=function(t,e,n,i){return new(n||(n=Promise))(function(s,a){function o(t){try{r(i.next(t))}catch(e){a(e)}}function c(t){try{r(i.throw(t))}catch(e){a(e)}}function r(t){var e;t.done?s(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,c)}r((i=i.apply(t,e||[])).next())})};class j{constructor(t,e,n){this.id=0,this.signPayload=t=>x(this,void 0,void 0,function*(){let{signature:e}=yield this.client.request({topic:this.session.topic,chainId:this.chainId,request:{id:1,jsonrpc:"2.0",method:"polkadot_signTransaction",params:{address:t.address,transactionPayload:t}}});return{id:++this.id,signature:e}}),this.signRaw=t=>x(this,void 0,void 0,function*(){let{signature:e}=yield this.client.request({topic:this.session.topic,chainId:"polkadot:91b171bb158e2d3848fa23a9f1c25182",request:{id:1,jsonrpc:"2.0",method:"polkadot_signMessage",params:{address:t.address,message:t.data}}});return{id:++this.id,signature:e}}),this.client=t,this.session=e,this.registry=new w.P,this.chainId=n}}var b=function(t,e,n,i){return new(n||(n=Promise))(function(s,a){function o(t){try{r(i.next(t))}catch(e){a(e)}}function c(t){try{r(i.throw(t))}catch(e){a(e)}}function r(t){var e;t.done?s(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,c)}r((i=i.apply(t,e||[])).next())})};let _="polkadot:91b171bb158e2d3848fa23a9f1c25182",y=t=>{let e=t.split(":")[2];return{address:e}};class k{constructor(t,e){var n,s,a;this.type=i.WALLET_CONNECT,this.config=t,this.appName=e,this.metadata={title:"Wallet Connect",description:(null===(n=t.metadata)||void 0===n?void 0:n.description)||"",urls:{main:(null===(s=t.metadata)||void 0===s?void 0:s.url)||""},iconUrl:(null===(a=t.metadata)||void 0===a?void 0:a.icons[0])||"",version:"2.0"}}reset(){this.client=void 0,this.session=void 0,this.signer=void 0}getAccounts(){return b(this,void 0,void 0,function*(){let t=[];return this.session&&(t=Object.values(this.session.namespaces).map(t=>t.accounts).flat().map(t=>y(t))),t})}connect(){return b(this,void 0,void 0,function*(){this.reset();let t=yield p.ZP.init(this.config),{uri:e,approval:n}=yield t.connect({requiredNamespaces:{polkadot:{methods:["polkadot_signTransaction","polkadot_signMessage"],chains:[_],events:[]}}});return new Promise((i,s)=>{e&&g().open(e,()=>{s(Error("Canceled pairing. QR Code Modal closed."))}),n().then(e=>{this.client=t,this.session=e,this.signer=new j(t,e,_),i()}).catch(s).finally(()=>g().close())})})}disconnect(){var t,e,n;return b(this,void 0,void 0,function*(){(null===(t=this.session)||void 0===t?void 0:t.topic)&&(null===(e=this.client)||void 0===e||e.disconnect({topic:null===(n=this.session)||void 0===n?void 0:n.topic,reason:{code:-1,message:"Disconnected by client!"}})),this.reset()})}isConnected(){return!!(this.client&&this.signer&&this.session)}}class N{constructor(t,e){this.config=t,this.appName=e}getWallets(){return[new k(this.config,this.appName)]}}var E,C={disallowed:[],supported:[{id:"polkadot-js",title:"polkadotJS",description:"Basic account injection and signer",downloadUrls:{main:"",browsers:{chrome:"https://chrome.google.com/webstore/detail/polkadot%7Bjs%7D-extension/mopnmbcafieddcagagdcbnhejhlodfdd",firefox:"https://addons.mozilla.org/en-US/firefox/addon/polkadot-js-extension/"}},iconUrl:"/images/polkadot-js.svg"},{id:"talisman",title:"talisman",description:"Talisman is a Polkadot wallet that unlocks a new world of multichain web3 applications in the Paraverse",urls:{main:"",browsers:{chrome:"https://chrome.google.com/webstore/detail/talisman-wallet/fijngjgcjhjmmpcmkeiomlglpeiijkld",firefox:"https://addons.mozilla.org/en-US/firefox/addon/talisman-wallet-extension/"}},iconUrl:"/images/talisman-icon.svg"},]},H=n(6724),T=n.n(H),P=n(8788),D=n(5163),W=n(6577),S=n.n(W),U=n(5196),L=n(6502),I=function(t){var e=t;if(t&&t.length>20){var n=t.slice(0,10),i=t.slice(-10);e="".concat(n,"...").concat(i)}return e},A=function(t){var e,n,i=t.api,a=t.account,o=t.signer,c=(e=(0,P.Z)(function(t){var e,n;return(0,D.__generator)(this,function(s){switch(s.label){case 0:if(t.preventDefault(),t.stopPropagation(),!(i&&(null==a?void 0:a.address)&&o))return[3,2];return e=i.registry.chainDecimals[0],n={},[4,i.tx.system.remark("I am signing this transaction!").signAndSend(a.address,(n.signer=o,n),function(){})];case 1:s.sent(),s.label=2;case 2:return[2]}})}),function(t){return e.apply(this,arguments)}),r=(n=(0,P.Z)(function(t){var e,n,i;return(0,D.__generator)(this,function(s){switch(s.label){case 0:if(t.preventDefault(),t.stopPropagation(),!((e=null==o?void 0:o.signRaw)&&(null==a?void 0:a.address)))return[3,2];return[4,e(((i={}).address=a.address,i.data="I am signing this message",i.type="bytes",i))];case 1:n=s.sent().signature,s.label=2;case 2:return[2]}})}),function(t){return n.apply(this,arguments)});return(0,s.jsxs)("div",{className:"".concat(T().card," ").concat(T().account),children:[(0,s.jsx)("div",{className:"".concat(T().name),children:I(null==a?void 0:a.name)}),(0,s.jsx)("div",{className:"".concat(T().address),children:I(null==a?void 0:a.address)}),(0,s.jsxs)("div",{className:"".concat(T().flex," ").concat(T().column),children:[(0,s.jsx)("button",{className:"".concat(T().btn," ").concat(T().small),onClick:function(t){return c(t)},children:"Submit Transaction"}),(0,s.jsx)("button",{className:"".concat(T().btn," ").concat(T().small),onClick:function(t){return r(t)},children:"Sign Message"})]})]})},O=function(t){var e,n,i=t.wallet,a=(0,c.useState)([]),o=a[0],r=a[1],l=(0,c.useState)(null),d=l[0],u=l[1],h=(0,c.useState)(!1),m=h[0],$=h[1];(0,c.useEffect)(function(){var t;(t=(0,P.Z)(function(){var t,e,n;return(0,D.__generator)(this,function(i){switch(i.label){case 0:return t=new U.U("wss://westend-rpc.polkadot.io"),n={},[4,L.G.create((n.provider=t,n))];case 1:return u(e=i.sent()),[2]}})}),function(){return t.apply(this,arguments)})()},[]);var f=(n=(0,P.Z)(function(t){var e,n;return(0,D.__generator)(this,function(t){switch(t.label){case 0:if(console.log("wallet clicked!"),m)return[3,6];t.label=1;case 1:return t.trys.push([1,4,5,6]),$(!0),[4,i.connect()];case 2:return t.sent(),[4,i.getAccounts()];case 3:return r(e=t.sent()),[3,6];case 4:return n=t.sent(),[3,6];case 5:return $(!1),[7];case 6:return[2]}})}),function(t){return n.apply(this,arguments)});return(0,s.jsxs)("div",{className:"".concat(T().card," ").concat(T().shadow),style:{marginBottom:"20px"},onClick:f,children:[(0,s.jsxs)("div",{className:"".concat(T().walletheader),children:[(0,s.jsx)("div",{style:{margin:5,display:"flex",alignItems:"center"},children:(null==i?void 0:null===(e=i.metadata)||void 0===e?void 0:e.iconUrl)&&(0,s.jsx)(S(),{width:45,height:45,src:"/polkadot-wallet-onboard".concat(i.metadata.iconUrl)})}),(0,s.jsx)("div",{children:"".concat(i.metadata.title," ").concat(i.metadata.version||"")})]}),(0,s.jsx)("div",{className:"".concat(T().wallet),children:o.length>0&&o.map(function(t){var e=t.address,n=t.name;return(0,s.jsx)("div",{children:(0,s.jsx)(A,{api:d,account:{address:e,name:void 0===n?"":n},signer:i.signer})},e)})})]})},G=(0,c.memo)(O),J=function(){var t=l().wallets;return(0,s.jsx)("div",{children:t.map(function(t){return(0,s.jsx)(G,{wallet:t},t.metadata.title)})})},q=(0,c.memo)(J),M="Polkadot Demo",R=function(){var t=new f(C,M),e=new N({projectId:"4fae85e642724ee66587fa9f37b997e2",relayUrl:"wss://relay.walletconnect.com",metadata:{name:"Polkadot Demo",description:"Polkadot Demo",url:"#",icons:["/images/wallet-connect.svg"]}},M),n=new u([t,e]),i=(0,c.useState)(!1),a=i[0],o=i[1];return(0,s.jsx)(d,{walletAggregator:n,children:(0,s.jsxs)("div",{className:"".concat(T().grid),children:[!a&&(0,s.jsx)("button",{className:"".concat(T().btn," ").concat(T().rounded),onClick:function(){o(!0)},children:"Get Wallets"}),a&&(0,s.jsx)(q,{})]})})},Z=function(){return(0,s.jsxs)("div",{className:T().container,children:[(0,s.jsxs)(o(),{children:[(0,s.jsx)("title",{children:"Substrate Wallet Aggregator"}),(0,s.jsx)("meta",{name:"description",content:"A wallet aggregator to select accounts from your different wallets"}),(0,s.jsx)("link",{rel:"icon",href:"/polkadot-wallet-onboard/favicon.ico"})]}),(0,s.jsxs)("main",{className:T().main,children:[(0,s.jsx)("h1",{className:T().title,children:"Substrate Wallets"}),(0,s.jsx)("p",{className:T().description,children:"Get started by connecting to your favorite wallets"}),(0,s.jsx)(R,{})]})]})}},6724:function(t){t.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",grid:"Home_grid__GxQ85",title:"Home_title__T09hD",description:"Home_description__41Owk",card:"Home_card___LpL1",shadow:"Home_shadow__UcJVL",wallet:"Home_wallet__iOS9t",walletheader:"Home_walletheader__JFQMn",account:"Home_account__SbDoP",name:"Home_name__Je8n6",address:"Home_address__UT_ly",logo:"Home_logo__27_tb",btn:"Home_btn__UGRT9",small:"Home_small__xqsik",flex:"Home_flex__XpVr_",column:"Home_column__Bx5cY",rounded:"Home_rounded__7bEnD"}},9314:function(){},5477:function(){},6646:function(){},2649:function(){},3196:function(){}},function(t){t.O(0,[827,435,774,888,179],function(){return t(t.s=7314)}),_N_E=t.O()}]);