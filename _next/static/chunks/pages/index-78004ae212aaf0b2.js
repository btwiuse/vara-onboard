(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7314:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3490)}])},3490:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var s,a=n(2322),i=n(7729),o=n.n(i),c=n(2784);let r=(0,c.createContext)({wallets:[]}),l=()=>(0,c.useContext)(r),d=({children:e,walletAggregator:t})=>{let[n,s]=(0,c.useState)([]);(0,c.useEffect)(()=>{s(t.getWallets())},[t]);let i=(0,c.useMemo)(()=>({wallets:n}),[n]);return(0,a.jsx)(r.Provider,{value:i,children:e})};class u{constructor(e){this.walletProviders=e}getWallets(){let e=[];for(let t of this.walletProviders)e.push(...t.getWallets());return e}}(N=s||(s={})).INJECTED="INJECTED",N.WALLET_CONNECT="WALLET_CONNECT",N.LEDGER="LEDGER";let h=e=>e;class m{constructor(e,t){this.type=s.INJECTED,this.extension=e,this.metadata={...e.metadata},this.appName=t}async getAccounts(){return(await this.injected?.accounts.get())?.map(e=>h(e))||[]}async connect(){try{let e;if(this.extension?.connect)e=await this.extension.connect(this.appName);else if(this.extension?.enable)e=await this.extension.enable(this.appName);else throw Error("No connect(..) or enable(...) hook found");this.injected=e,this.signer=e.signer}catch({message:t}){console.error(`Error initializing ${this.metadata.title}: ${t}`)}}async disconnect(){}isConnected(){return!1}}class p{constructor(e,t,n=!1){this.config=e,this.supportedOnly=n,this.appName=t}getExtensions(){let e=window,t=[],n=[];return e.injectedWeb3?Object.keys(e.injectedWeb3).forEach(s=>{if(!this.config.disallowed?.includes(s)){let a=this.config.supported?.find(({id:e})=>e===s);a?t.push({...e.injectedWeb3[s],metadata:a}):n.push({...e.injectedWeb3[s],metadata:{id:s,title:s}})}}):console.info("no extension was detected!"),{known:t,other:n}}getWallets(){let e=[],{known:t,other:n}=this.getExtensions(),s=[...t];return this.supportedOnly||(s=[...s,...n]),s.map(e=>new m(e,this.appName))}}var g=n(1653),f=n(8980),_=n(3588);class w{constructor(e,t,n){this.id=0,this.signPayload=async e=>{let{signature:t}=await this.client.request({topic:this.session.topic,chainId:this.chainId,request:{id:1,jsonrpc:"2.0",method:"polkadot_signTransaction",params:{address:e.address,transactionPayload:e}}});return{id:++this.id,signature:t}},this.signRaw=async e=>{let{signature:t}=await this.client.request({topic:this.session.topic,chainId:"polkadot:91b171bb158e2d3848fa23a9f1c25182",request:{id:1,jsonrpc:"2.0",method:"polkadot_signMessage",params:{address:e.address,message:e.data}}});return{id:++this.id,signature:t}},this.client=e,this.session=t,this.registry=new _.P,this.chainId=n}}let v="polkadot:91b171bb158e2d3848fa23a9f1c25182",x=e=>{let t=e.split(":")[2];return{address:t}};class j{constructor(e,t){this.type=s.WALLET_CONNECT,this.config=e,this.appName=t,this.metadata={title:"Wallet Connect",description:e.metadata?.description||"",urls:{main:e.metadata?.url||""},iconUrl:e.metadata?.icons[0]||"",version:"2.0"}}reset(){this.client=void 0,this.session=void 0,this.signer=void 0}async getAccounts(){let e=[];return this.session&&(e=Object.values(this.session.namespaces).map(e=>e.accounts).flat().map(e=>x(e))),e}async connect(){this.reset();let e=await g.ZP.init(this.config),{uri:t,approval:n}=await e.connect({requiredNamespaces:{polkadot:{methods:["polkadot_signTransaction","polkadot_signMessage"],chains:[v],events:[]}}});return new Promise((s,a)=>{t&&f.open(t,()=>{a(Error("Canceled pairing. QR Code Modal closed."))}),n().then(t=>{this.client=e,this.session=t,this.signer=new w(e,t,v),s()}).catch(a).finally(()=>f.close())})}async disconnect(){this.session?.topic&&this.client?.disconnect({topic:this.session?.topic,reason:{code:-1,message:"Disconnected by client!"}}),this.reset()}isConnected(){return!!(this.client&&this.signer&&this.session)}}class b{constructor(e,t){this.config=e,this.appName=t}getWallets(){return[new j(this.config,this.appName)]}}var N,y={disallowed:[],supported:[{id:"polkadot-js",title:"polkadotJS",description:"Basic account injection and signer",urls:{main:"",browsers:{chrome:"https://chrome.google.com/webstore/detail/polkadot%7Bjs%7D-extension/mopnmbcafieddcagagdcbnhejhlodfdd",firefox:"https://addons.mozilla.org/en-US/firefox/addon/polkadot-js-extension/"}},iconUrl:"/images/polkadot-js.svg"},{id:"talisman",title:"talisman",description:"Talisman is a Polkadot wallet that unlocks a new world of multichain web3 applications in the Paraverse",urls:{main:"",browsers:{chrome:"https://chrome.google.com/webstore/detail/talisman-wallet/fijngjgcjhjmmpcmkeiomlglpeiijkld",firefox:"https://addons.mozilla.org/en-US/firefox/addon/talisman-wallet-extension/"}},iconUrl:"/images/talisman-icon.svg"},]},k=n(6724),E=n.n(k),C=n(8788),H=n(5680),P=n(6577),T=n.n(P),D=n(5196),W=n(2099),S=function(e){var t=e;if(e&&e.length>20){var n=e.slice(0,10),s=e.slice(-10);t="".concat(n,"...").concat(s)}return t},L=function(e){var t,n,s=e.api,i=e.account,o=e.signer,c=(t=(0,C.Z)(function(e){return(0,H.__generator)(this,function(t){switch(t.label){case 0:if(e.preventDefault(),e.stopPropagation(),!(s&&(null==i?void 0:i.address)&&o))return[3,2];return s.registry.chainDecimals[0],[4,s.tx.system.remark("I am signing this transaction!").signAndSend(i.address,{signer:o},function(){})];case 1:t.sent(),t.label=2;case 2:return[2]}})}),function(e){return t.apply(this,arguments)}),r=(n=(0,C.Z)(function(e){var t;return(0,H.__generator)(this,function(n){switch(n.label){case 0:if(e.preventDefault(),e.stopPropagation(),!((t=null==o?void 0:o.signRaw)&&(null==i?void 0:i.address)))return[3,2];return[4,t({address:i.address,data:"I am signing this message",type:"bytes"})];case 1:n.sent().signature,n.label=2;case 2:return[2]}})}),function(e){return n.apply(this,arguments)});return(0,a.jsxs)("div",{className:"".concat(E().card," ").concat(E().account),children:[(0,a.jsx)("div",{className:"".concat(E().name),children:S(null==i?void 0:i.name)}),(0,a.jsx)("div",{className:"".concat(E().address),children:S(null==i?void 0:i.address)}),(0,a.jsxs)("div",{className:"".concat(E().flex," ").concat(E().column),children:[(0,a.jsx)("button",{className:"".concat(E().btn," ").concat(E().small),onClick:function(e){return c(e)},children:"Submit Transaction"}),(0,a.jsx)("button",{className:"".concat(E().btn," ").concat(E().small),onClick:function(e){return r(e)},children:"Sign Message"})]})]})},O=function(e){var t,n,s=e.wallet,i=(0,c.useState)([]),o=i[0],r=i[1],l=(0,c.useState)(null),d=l[0],u=l[1],h=(0,c.useState)(!1),m=h[0],p=h[1];(0,c.useEffect)(function(){var e;(e=(0,C.Z)(function(){var e,t;return(0,H.__generator)(this,function(t){switch(t.label){case 0:return e=new D.U("wss://westend-rpc.polkadot.io"),[4,W.G.create({provider:e})];case 1:return u(t.sent()),[2]}})}),function(){return e.apply(this,arguments)})()},[]);var g=(n=(0,C.Z)(function(e){var t;return(0,H.__generator)(this,function(e){switch(e.label){case 0:if(console.log("wallet clicked!"),m)return[3,6];e.label=1;case 1:return e.trys.push([1,4,5,6]),p(!0),[4,s.connect()];case 2:return e.sent(),[4,s.getAccounts()];case 3:return r(e.sent()),[3,6];case 4:return e.sent(),[3,6];case 5:return p(!1),[7];case 6:return[2]}})}),function(e){return n.apply(this,arguments)});return(0,a.jsxs)("div",{className:"".concat(E().card," ").concat(E().shadow),style:{marginBottom:"20px"},onClick:g,children:[(0,a.jsxs)("div",{className:"".concat(E().walletheader),children:[(0,a.jsx)("div",{style:{margin:5,display:"flex",alignItems:"center"},children:(null==s?void 0:null===(t=s.metadata)||void 0===t?void 0:t.iconUrl)&&(0,a.jsx)(T(),{width:45,height:45,src:s.metadata.iconUrl})}),(0,a.jsx)("div",{children:"".concat(s.metadata.title," ").concat(s.metadata.version||"")})]}),(0,a.jsx)("div",{className:"".concat(E().wallet),children:o.length>0&&o.map(function(e){var t=e.address,n=e.name;return(0,a.jsx)("div",{children:(0,a.jsx)(L,{api:d,account:{address:t,name:void 0===n?"":n},signer:s.signer})},t)})})]})},U=(0,c.memo)(O),I=function(){var e=l().wallets;return(0,a.jsx)("div",{children:e.map(function(e){return(0,a.jsx)(U,{wallet:e},e.metadata.title)})})},A=(0,c.memo)(I),G="Polkadot Demo",J=function(){var e=new p(y,G),t=new b({projectId:"4fae85e642724ee66587fa9f37b997e2",relayUrl:"wss://relay.walletconnect.com",metadata:{name:"Polkadot Demo",description:"Polkadot Demo",url:"#",icons:["/images/wallet-connect.svg"]}},G),n=new u([e,t]),s=(0,c.useState)(!1),i=s[0],o=s[1];return(0,a.jsx)(d,{walletAggregator:n,children:(0,a.jsxs)("div",{className:"".concat(E().grid),children:[!i&&(0,a.jsx)("button",{className:"".concat(E().btn," ").concat(E().rounded),onClick:function(){o(!0)},children:"Get Wallets"}),i&&(0,a.jsx)(A,{})]})})},q=function(){return(0,a.jsxs)("div",{className:E().container,children:[(0,a.jsxs)(o(),{children:[(0,a.jsx)("title",{children:"Substrate Wallet Aggregator"}),(0,a.jsx)("meta",{name:"description",content:"A wallet aggregator to select accounts from your different wallets"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)("main",{className:E().main,children:[(0,a.jsx)("h1",{className:E().title,children:"Substrate Wallets"}),(0,a.jsx)("p",{className:E().description,children:"Get started by connecting to your favorite wallets"}),(0,a.jsx)(J,{})]})]})}},6724:function(e){e.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",grid:"Home_grid__GxQ85",title:"Home_title__T09hD",description:"Home_description__41Owk",card:"Home_card___LpL1",shadow:"Home_shadow__UcJVL",wallet:"Home_wallet__iOS9t",walletheader:"Home_walletheader__JFQMn",account:"Home_account__SbDoP",name:"Home_name__Je8n6",address:"Home_address__UT_ly",logo:"Home_logo__27_tb",btn:"Home_btn__UGRT9",small:"Home_small__xqsik",flex:"Home_flex__XpVr_",column:"Home_column__Bx5cY",rounded:"Home_rounded__7bEnD"}},9314:function(){},5477:function(){},3196:function(){}},function(e){e.O(0,[827,955,774,888,179],function(){return e(e.s=7314)}),_N_E=e.O()}]);