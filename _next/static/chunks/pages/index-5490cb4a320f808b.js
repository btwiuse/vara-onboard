(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7314:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3490)}])},3490:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return q}});var i,s=n(2322),a=n(7729),o=n.n(a),c=n(2784);let r=(0,c.createContext)({wallets:[]}),l=()=>(0,c.useContext)(r),d=({children:t,walletAggregator:e})=>{let[n,i]=(0,c.useState)([]);(0,c.useEffect)(()=>{i(e.getWallets())},[e]);let a=(0,c.useMemo)(()=>({wallets:n}),[n]);return(0,s.jsx)(r.Provider,Object.assign({value:a},{children:t}))};class u{constructor(t){this.walletProviders=t}getWallets(){let t=[];for(let e of this.walletProviders)t.push(...e.getWallets());return t}}(k=i||(i={})).INJECTED="INJECTED",k.WALLET_CONNECT="WALLET_CONNECT",k.LEDGER="LEDGER";var h=function(t,e,n,i){return new(n||(n=Promise))(function(s,a){function o(t){try{r(i.next(t))}catch(e){a(e)}}function c(t){try{r(i.throw(t))}catch(e){a(e)}}function r(t){var e;t.done?s(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,c)}r((i=i.apply(t,e||[])).next())})};let m=t=>t;class ${constructor(t,e){this.type=i.INJECTED,this.extension=t,this.metadata=Object.assign({},t.metadata),this.appName=e}getAccounts(){var t;return h(this,void 0,void 0,function*(){let e=yield null===(t=this.injected)||void 0===t?void 0:t.accounts.get();return(null==e?void 0:e.map(t=>m(t)))||[]})}connect(){var t;return h(this,void 0,void 0,function*(){this.injected=yield null===(t=this.extension)||void 0===t?void 0:t.enable(this.appName),this.signer=this.injected.signer})}disconnect(){return h(this,void 0,void 0,function*(){})}isConnected(){return!1}}class f{constructor(t,e,n=!1){this.config=t,this.supportedOnly=n,this.appName=e}getExtensions(){let t=window,e=[],n=[];return t.injectedWeb3?Object.keys(t.injectedWeb3).forEach(i=>{var s,a;if(!(null===(s=this.config.disallowed)||void 0===s?void 0:s.includes(i))){let o=null===(a=this.config.supported)||void 0===a?void 0:a.find(({id:t})=>t===i);o?e.push(Object.assign(Object.assign({},t.injectedWeb3[i]),{metadata:o})):n.push(Object.assign(Object.assign({},t.injectedWeb3[i]),{metadata:{id:i,title:i}}))}}):console.log("no extension was detected!"),{known:e,other:n}}getWallets(){let t=[],{known:e,other:n}=this.getExtensions(),i=[...e];return this.supportedOnly||(i=[...i,...n]),i.map(t=>new $(t,this.appName))}}var p=n(2319),v=n(8980),g=n(3588),w=function(t,e,n,i){return new(n||(n=Promise))(function(s,a){function o(t){try{r(i.next(t))}catch(e){a(e)}}function c(t){try{r(i.throw(t))}catch(e){a(e)}}function r(t){var e;t.done?s(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,c)}r((i=i.apply(t,e||[])).next())})};class x{constructor(t,e,n){this.id=0,this.signPayload=t=>w(this,void 0,void 0,function*(){let{signature:e}=yield this.client.request({topic:this.session.topic,chainId:this.chainId,request:{id:1,jsonrpc:"2.0",method:"polkadot_signTransaction",params:{address:t.address,transactionPayload:t}}});return{id:++this.id,signature:e}}),this.signRaw=t=>w(this,void 0,void 0,function*(){let{signature:e}=yield this.client.request({topic:this.session.topic,chainId:"polkadot:91b171bb158e2d3848fa23a9f1c25182",request:{id:1,jsonrpc:"2.0",method:"polkadot_signMessage",params:{address:t.address,message:t.data}}});return{id:++this.id,signature:e}}),this.client=t,this.session=e,this.registry=new g.P,this.chainId=n}}var j=function(t,e,n,i){return new(n||(n=Promise))(function(s,a){function o(t){try{r(i.next(t))}catch(e){a(e)}}function c(t){try{r(i.throw(t))}catch(e){a(e)}}function r(t){var e;t.done?s(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(o,c)}r((i=i.apply(t,e||[])).next())})};let b="polkadot:91b171bb158e2d3848fa23a9f1c25182",_=t=>{let e=t.split(":")[2];return{address:e}};class y{constructor(t,e){var n,s,a;this.type=i.WALLET_CONNECT,this.config=t,this.appName=e,this.metadata={title:"Wallet Connect",description:(null===(n=t.metadata)||void 0===n?void 0:n.description)||"",urls:{main:(null===(s=t.metadata)||void 0===s?void 0:s.url)||""},iconUrl:(null===(a=t.metadata)||void 0===a?void 0:a.icons[0])||"",version:"2.0"}}reset(){this.client=void 0,this.session=void 0,this.signer=void 0}getAccounts(){return j(this,void 0,void 0,function*(){let t=[];return this.session&&(t=Object.values(this.session.namespaces).map(t=>t.accounts).flat().map(t=>_(t))),t})}connect(){return j(this,void 0,void 0,function*(){this.reset();let t=yield p.ZP.init(this.config),{uri:e,approval:n}=yield t.connect({requiredNamespaces:{polkadot:{methods:["polkadot_signTransaction","polkadot_signMessage"],chains:[b],events:[]}}});return new Promise((i,s)=>{e&&v.open(e,()=>{s(Error("Canceled pairing. QR Code Modal closed."))}),n().then(e=>{this.client=t,this.session=e,this.signer=new x(t,e,b),i()}).catch(s).finally(()=>v.close())})})}disconnect(){var t,e,n;return j(this,void 0,void 0,function*(){(null===(t=this.session)||void 0===t?void 0:t.topic)&&(null===(e=this.client)||void 0===e||e.disconnect({topic:null===(n=this.session)||void 0===n?void 0:n.topic,reason:{code:-1,message:"Disconnected by client!"}})),this.reset()})}isConnected(){return!!(this.client&&this.signer&&this.session)}}class N{constructor(t,e){this.config=t,this.appName=e}getWallets(){return[new y(this.config,this.appName)]}}var k,E={disallowed:[],supported:[{id:"polkadot-js",title:"polkadotJS",description:"Basic account injection and signer",urls:{main:"",browsers:{chrome:"https://chrome.google.com/webstore/detail/polkadot%7Bjs%7D-extension/mopnmbcafieddcagagdcbnhejhlodfdd",firefox:"https://addons.mozilla.org/en-US/firefox/addon/polkadot-js-extension/"}}},{id:"talisman",title:"talisman",description:"Talisman is a Polkadot wallet that unlocks a new world of multichain web3 applications in the Paraverse",urls:{main:"",browsers:{chrome:"https://chrome.google.com/webstore/detail/talisman-wallet/fijngjgcjhjmmpcmkeiomlglpeiijkld",firefox:"https://addons.mozilla.org/en-US/firefox/addon/talisman-wallet-extension/"}}},]},C=n(6724),H=n.n(C),T=n(8788),P=n(5163),D=n(5196),W=n(6502),S=function(t){var e=t;if(t&&t.length>20){var n=t.slice(0,10),i=t.slice(-10);e="".concat(n,"...").concat(i)}return e},L=function(t){var e,n,i=t.api,a=t.account,o=t.signer,c=(e=(0,T.Z)(function(t){var e,n;return(0,P.__generator)(this,function(s){switch(s.label){case 0:if(t.preventDefault(),t.stopPropagation(),!(i&&(null==a?void 0:a.address)&&o))return[3,2];return e=i.registry.chainDecimals[0],n={},[4,i.tx.system.remark("I am signing this transaction!").signAndSend(a.address,(n.signer=o,n),function(){})];case 1:s.sent(),s.label=2;case 2:return[2]}})}),function(t){return e.apply(this,arguments)}),r=(n=(0,T.Z)(function(t){var e,n,i;return(0,P.__generator)(this,function(s){switch(s.label){case 0:if(t.preventDefault(),t.stopPropagation(),!((e=null==o?void 0:o.signRaw)&&(null==a?void 0:a.address)))return[3,2];return[4,e(((i={}).address=a.address,i.data="I am signing this message",i.type="bytes",i))];case 1:n=s.sent().signature,s.label=2;case 2:return[2]}})}),function(t){return n.apply(this,arguments)});return(0,s.jsxs)("div",{className:"".concat(H().card," ").concat(H().account),children:[(0,s.jsx)("div",{className:"".concat(H().name),children:S(null==a?void 0:a.name)}),(0,s.jsx)("div",{className:"".concat(H().address),children:S(null==a?void 0:a.address)}),(0,s.jsxs)("div",{className:"".concat(H().flex," ").concat(H().column),children:[(0,s.jsx)("button",{className:"".concat(H().btn," ").concat(H().small),onClick:function(t){return c(t)},children:"Submit Transaction"}),(0,s.jsx)("button",{className:"".concat(H().btn," ").concat(H().small),onClick:function(t){return r(t)},children:"Sign Message"})]})]})},A=function(t){var e,n=t.wallet,i=(0,c.useState)([]),a=i[0],o=i[1],r=(0,c.useState)(null),l=r[0],d=r[1],u=(0,c.useState)(!1),h=u[0],m=u[1];(0,c.useEffect)(function(){var t;(t=(0,T.Z)(function(){var t,e,n;return(0,P.__generator)(this,function(i){switch(i.label){case 0:return t=new D.U("wss://westend-rpc.polkadot.io"),n={},[4,W.G.create((n.provider=t,n))];case 1:return d(e=i.sent()),[2]}})}),function(){return t.apply(this,arguments)})()},[]);var $=(e=(0,T.Z)(function(t){var e,i;return(0,P.__generator)(this,function(t){switch(t.label){case 0:if(console.log("wallet clicked!"),h)return[3,6];t.label=1;case 1:return t.trys.push([1,4,5,6]),m(!0),[4,n.connect()];case 2:return t.sent(),[4,n.getAccounts()];case 3:return o(e=t.sent()),[3,6];case 4:return i=t.sent(),[3,6];case 5:return m(!1),[7];case 6:return[2]}})}),function(t){return e.apply(this,arguments)});return(0,s.jsxs)("div",{className:"".concat(H().card," ").concat(H().shadow),style:{marginBottom:"20px"},onClick:$,children:[(0,s.jsx)("div",{className:"".concat(H().walletheader),children:"".concat(n.metadata.title," ").concat(n.metadata.version||"")}),(0,s.jsx)("div",{className:"".concat(H().wallet),children:a.length>0&&a.map(function(t){var e=t.address,i=t.name;return(0,s.jsx)("div",{children:(0,s.jsx)(L,{api:l,account:{address:e,name:void 0===i?"":i},signer:n.signer})},e)})})]})},I=(0,c.memo)(A),O=function(){var t=l().wallets;return(0,s.jsx)("div",{children:t.map(function(t){return(0,s.jsx)(I,{wallet:t},t.metadata.title)})})},U=(0,c.memo)(O),G="Polkadot Demo",J=function(){var t=new f(E,G),e=new N({projectId:"4fae85e642724ee66587fa9f37b997e2",relayUrl:"wss://relay.walletconnect.com",metadata:{name:"Polkadot Demo",description:"Polkadot Demo",url:"#",icons:["https://walletconnect.com/walletconnect-logo.png"]}},G),n=new u([t,e]),i=(0,c.useState)(!1),a=i[0],o=i[1];return(0,s.jsx)(d,{walletAggregator:n,children:(0,s.jsxs)("div",{className:"".concat(H().grid),children:[!a&&(0,s.jsx)("button",{className:"".concat(H().btn," ").concat(H().rounded),onClick:function(){o(!0)},children:"Get Wallets"}),a&&(0,s.jsx)(U,{})]})})},q=function(){return(0,s.jsxs)("div",{className:H().container,children:[(0,s.jsxs)(o(),{children:[(0,s.jsx)("title",{children:"Substrate Wallet Aggregator"}),(0,s.jsx)("meta",{name:"description",content:"A wallet aggregator to select accounts from your different wallets"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)("main",{className:H().main,children:[(0,s.jsx)("h1",{className:H().title,children:"Substrate Wallets"}),(0,s.jsx)("p",{className:H().description,children:"Get started by connecting to your favorite wallets"}),(0,s.jsx)(J,{})]})]})}},6724:function(t){t.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",grid:"Home_grid__GxQ85",title:"Home_title__T09hD",description:"Home_description__41Owk",card:"Home_card___LpL1",shadow:"Home_shadow__UcJVL",wallet:"Home_wallet__iOS9t",walletheader:"Home_walletheader__JFQMn",account:"Home_account__SbDoP",name:"Home_name__Je8n6",address:"Home_address__UT_ly",logo:"Home_logo__27_tb",btn:"Home_btn__UGRT9",small:"Home_small__xqsik",flex:"Home_flex__XpVr_",column:"Home_column__Bx5cY",rounded:"Home_rounded__7bEnD"}},9314:function(){},5477:function(){},6646:function(){},2649:function(){},3196:function(){}},function(t){t.O(0,[827,388,774,888,179],function(){return t(t.s=7314)}),_N_E=t.O()}]);